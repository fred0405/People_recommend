{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Youtuber Recommendation</title>

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href={% static "css/materialize.css" %} type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href={% static "css/style.css" %} type="text/css" rel="stylesheet" media="screen,projection"/>
</head>
<body>
  <div class="loader-background"></div>
  <div class="loader">
    <div class="preloader-wrapper big active">
      <div class="spinner-layer spinner-blue">
        <div class="circle-clipper left">
          <div class="circle"></div>
        </div><div class="gap-patch">
          <div class="circle"></div>
        </div><div class="circle-clipper right">
          <div class="circle"></div>
        </div>
      </div>

      <div class="spinner-layer spinner-red">
        <div class="circle-clipper left">
          <div class="circle"></div>
        </div><div class="gap-patch">
          <div class="circle"></div>
        </div><div class="circle-clipper right">
          <div class="circle"></div>
        </div>
      </div>

      <div class="spinner-layer spinner-yellow">
        <div class="circle-clipper left">
          <div class="circle"></div>
        </div><div class="gap-patch">
          <div class="circle"></div>
        </div><div class="circle-clipper right">
          <div class="circle"></div>
        </div>
      </div>

      <div class="spinner-layer spinner-green">
        <div class="circle-clipper left">
          <div class="circle"></div>
        </div><div class="gap-patch">
          <div class="circle"></div>
        </div><div class="circle-clipper right">
          <div class="circle"></div>
        </div>
      </div>
    </div>
  </div>

  <div id="index-banner" class="parallax-container">
    <div class="section no-pad-bot">
      <div class="container">
        <br><br>
        <h1 class="header center golden">Youtuber Recommendation</h1>
        <!--h1 class="header center teal-text text-lighten-2">Youtuber Recommendation</h1-->
        <div class="row center">
		<h5 class="header col s12 light"><input id="keyword" type="text" placeholder="Keyword...." style="background-color: white; padding-left: 10px; padding-right: 10px;"/></h5>
        </div>
        <div class="row center">
	  <button class="btn-large waves-effect waves-light teal lighten-1 operatorBtn calcOperator kk-hover-shadow">Start Searching</button>
        </div>
        <br><br>

      </div>
    </div>
    <div class="parallax"><img src={% static "images/background4.jpg" %} alt="Unsplashed background img 1"/></div>
  </div>


  <div class="container">
    <div class="col-md-12 offset-md-0 change-size" style="z-index: 1000;">
      <div class="list-container">

      </div>
    </div>
  </div>


  <footer class="page-footer teal">
    <div class="container">
      <div class="row">
        <div class="col l6 s12">
          <!--h5 class="white-text">Group Bio</h5-->
          <h5 class="golden">Group Bio</h5>
	  <!--p class="grey-text text-lighten-4">We are a team of college students working on this recommendation project....(<strong>Not finish....</strong>)</p-->
	  <p class="golden text-lighten-4">We are a team of college students working on this recommendation project....(<strong>Not finish....</strong>)</p>


        </div>
        <div class="col l3 s12">
          <!--h5 class="white-text">Members</h5-->
          <h5 class="golden">Members</h5>
          <ul>
            <li><a class="golden" href="#!">LAI, Hong-Yi</a></li>
            <li><a class="golden" href="#!">CHIANG, Mong-Hsun</a></li>
            <li><a class="golden" href="#!">CHANG, Chi-Hung</a></li>
            <li><a class="golden" href="#!">LIU, Shang-Chiuan</a></li>
            <!--li><a class="white-text" href="#!">CHANG, Chi-Hung</a></li-->
          </ul>
        </div>
        <div class="col l3 s12">
          <!--h5 class="white-text">Connect</h5-->
          <h5 class="golden">Connect</h5>
          <ul>
            <li><a class="golden" href="#!">Link 1</a></li>
            <li><a class="golden" href="#!">Link 2</a></li>
            <li><a class="golden" href="#!">Link 3</a></li>
            <li><a class="golden" href="#!">Link 4</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="footer-copyright">
      <div class="container">
      Made by <a class="brown-text text-lighten-3" href="http://materializecss.com">Materialize</a>
      </div>
    </div>
  </footer>


  <!--  Scripts-->
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src={% static "js/materialize.js" %}></script>
  <script src={% static "js/init.js" %}></script>

  </body>

	<script>
		// mouse touch
		$('.calcOperator').hover(function(){
			$(this).stop().animate({'opacity': 0.5});
		}, function(){
			$(this).stop().animate({'opacity': 1});
		});

		$(document).ready(function(){
			$('.calcOperator').click(function(){
				$('.row.center').animate({width: '50%'});
				$('.list-container').slideUp('slow');
				$('.list-container').empty();
				$('.loader').fadeIn(500);
				$('.loader-background').fadeIn(500);
				
				$.post('/search/', {keyword: $('#keyword').val()}, (rtn) => {
					var count = 0;
					$.each(JSON.parse(rtn.result), function(idx, val){
						count = count + 1;
						$('.list-container').append('<div class="youtuber-list"><p class="youtuber youtuber' + count + '">' + idx + '</p><div class="videos"><table class="video-list youtuber' + count + '"><thead></thead><tbody><tr></tr></tbody></table></div></div>');
						$('p.youtuber.youtuber' + count).append('<br>' + Object.values(val.info)[0]);
						$.each(Object.values(val.movie).map(item => item.movie_id), function(index, movie){
							$('.video-list.youtuber' + count + ' tr').append('<td class="youtuber' + count + ' video"><iframe width="560" height="315" src="https://www.youtube.com/embed/' + movie + '" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></td>');
							return (index < 9);
						});
						return (count < 5);
					});
					
					$('.list-container').slideDown('slow');
					$('.loader').fadeOut(500);
					$('.loader-background').fadeOut(500);
				});
			});
		});

		$(document).ready(function(){
			$('.list-container').on('click', '.youtuber-list .youtuber.youtuber1', function(){
				$('.youtuber1.video').slideToggle('slow');
				$('.youtuber2.video').slideUp('slow');
				$('.youtuber3.video').slideUp('slow');
				$('.youtuber4.video').slideUp('slow');
				$('.youtuber5.video').slideUp('slow');
			});
			$('.list-container').on('click', '.youtuber-list .youtuber.youtuber2', function(){
				$('.youtuber1.video').slideUp('slow');
				$('.youtuber2.video').slideToggle('slow');
				$('.youtuber3.video').slideUp('slow');
				$('.youtuber4.video').slideUp('slow');
				$('.youtuber5.video').slideUp('slow');
			});
			$('.list-container').on('click', '.youtuber-list .youtuber.youtuber3', function(){
				$('.youtuber1.video').slideUp('slow');
				$('.youtuber2.video').slideUp('slow');
				$('.youtuber3.video').slideToggle('slow');
				$('.youtuber4.video').slideUp('slow');
				$('.youtuber5.video').slideUp('slow');
			});
			$('.list-container').on('click', '.youtuber-list .youtuber.youtuber4', function(){
				$('.youtuber1.video').slideUp('slow');
				$('.youtuber2.video').slideUp('slow');
				$('.youtuber3.video').slideUp('slow');
				$('.youtuber4.video').slideToggle('slow');
				$('.youtuber5.video').slideUp('slow');
			});
			$('.list-container').on('click', '.youtuber-list .youtuber.youtuber5', function(){
				$('.youtuber1.video').slideUp('slow');
				$('.youtuber2.video').slideUp('slow');
				$('.youtuber3.video').slideUp('slow');
				$('.youtuber4.video').slideUp('slow');
				$('.youtuber5.video').slideToggle('slow');
			});
		});
	</script>
</html>
